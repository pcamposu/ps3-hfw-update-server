services:
  ps3-hfw-server:
    build:
      context: .
      dockerfile: Dockerfile
    image: ps3-hfw-update-server:dev
    container_name: ps3-hfw-update-server-dev
    restart: "no"

    ports:
      - target: 53
        published: 53
        protocol: tcp
      - target: 53
        published: 53
        protocol: udp
      - target: 80
        published: 80
        protocol: tcp

    cap_add:
      - NET_BIND_SERVICE

    environment:
      UPSTREAM_DNS: 8.8.8.8
      LOCAL_IP: 192.168.1.100
      VERBOSE: "true"

    deploy:
      resources:
        limits:
          cpus: '0.0'
          memory: '0'

    stdin_open: true
    tty: true

    labels:
      com.ps3hfw.description: "PS3 HFW Update Server - Development"
      com.ps3hfw.environment: "development"
